<!doctype html>

<html lang="en">
<head>
    <title>Mission To Mars</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="http://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/custom.css">

</head>


<body class="background_stars">
<script src="js/scripts.js"></script>

<div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 text-center create_box">
    <div>
        <!-- Modal content-->
        <div class="color-white">
            <div class="">
<!--                <button type="button" class="close" data-dismiss="modal">&times;</button>-->
                <h4 class=" text-center"><b>View and Edit Mission Details</b></h4>
            </div>
            <div class="">
                <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                    <div class="text-center margin-top-20">
                        <p>Misison Requirement Analysis</p>
                    </div>
                    <!--edit mission form starts here -->


                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 text-center col-md-offset-3">
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                            <!-- each field start-->
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20">
                                <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <p class="font-size-16">Mission Name</p>
                                    </div>

                                </div>
                                <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <input class="form-control width-100 form_fields_edit" type="text" id="edit_mission_name" >
                                    </div>

                                </div>
                            </div>
                            <!--each field end-->


                        </div>
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                            <!-- each field start-->
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20">
                                <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">

                                        <p class="font-size-16">Mission Description</p>
                                    </div>

                                </div>
                                <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <input class="form-control width-100 form_fields_edit" type="text" id="edit_mission_desc" name ="">
                                    </div>
                                </div>
                            </div>
                            <!--each field end-->

                        </div>
                    </div>


                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 text-center col-md-offset-3">
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                            <!-- each field start-->
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20">
                                <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <p class="font-size-16">Country of Origin</p>
                                    </div>

                                </div>
                                <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <input class="form-control width-100 form_fields_edit" type="text" id="edit_country_origin" name ="">
                                    </div>

                                </div>

                            </div>
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                <!-- each field start-->
                                <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20">
                                    <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                            <p class="font-size-16">Mission Type</p>
                                        </div>

                                    </div>
                                    <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 ">
                                            <input class="form-control width-100 form_fields_edit" type="text" id="edit_mission_type" name ="" >

                                        </div>

                                    </div>
                                </div>


                            </div>

                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 text-center">
                                <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                    <!-- each field start-->
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20">
                                        <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                                <p class="font-size-16">Duration in Days</p>
                                            </div>

                                        </div>
                                        <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                                <input class="form-control width-100 form_fields_edit" type="text" id="edit_duration" name ="">
                                            </div>

                                        </div>
                                    </div>
                            <!--each field end-->

                        </div>
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                            <!-- each field start-->
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20" >
                                <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <p class="font-size-16">Country Allowed</p>
                                    </div>

                                </div>
                                <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12" id="countriesAllowed">
<!--                                        <input class="form-control width-100 form_fields_edit " type="text" id="edit_country_allowed" name ="">-->

                                    </div>

                                </div>
                            </div>
                            <!--each field end-->

                        </div>
                    </div>


                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 text-center">
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                            <!-- each field start-->
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20">
                                <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <p class="font-size-16">launch Date</p>
                                    </div>

                                </div>
                                <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <input class="form-control width-100 form_fields_edit" type="text" id="edit_launch_date" name ="">
                                    </div>

                                </div>
                            </div>
                            <!--each field end-->

                        </div>
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                            <!-- each field start-->
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20">
                                <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <p class="font-size-16">Location</p>
                                    </div>

                                </div>
                                <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <input class="form-control width-100 form_fields_edit" type="text" id="edit_destination" name ="">
                                    </div>

                                </div>
                            </div>
                            <!--each field end-->

                        </div>
                    </div>

                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 text-center">

                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                            <!-- each field start-->
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20">
                                <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <p class="font-size-16">Employee</p>
                                    </div>

                                </div>
                                <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12" id="edit_emp_div">
                               <!--     <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12" id="created_div">
                                        <input class="form-control width-100 form_fields_edit" type="text" id="edit_emp_title" name ="" placeholder=>
                                        <input class="form-control width-100 form_fields_edit" type="text" id="edit_emp_no" name ="" placeholder=>

                                    </div>-->

                                </div>
                            </div>
                            <!--each field end-->

                        </div>
                    </div>

                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 text-center">
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                            <!-- each field start-->
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20">
                                <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <p class="font-size-16">Cargo</p>
                                    </div>

                                </div>
                                <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12" id="edit_cargo">
                                      <!--  <input class="form-control width-100 form_fields_edit" type="text" id="edit_cargo_type" name ="">

                                        <input class="form-control width-100 form_fields_edit" type="text" id="edit_cargo_name" name ="">

                                        <input class="form-control width-100 form_fields_edit" type="text" id="edit_cargo_quant" name ="" >-->

                                    </div>

                                </div>
                            </div>
                            <!--each field end-->

                        </div>
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                            <!-- each field start-->
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20">
                                <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <p class="font-size-16">Status</p>
                                    </div>

                                </div>
                                <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <input class="form-control width-100 form_fields_edit" type="text" id="edit_status" name ="" >

                                    </div>

                                </div>
                            </div>
                            <!--each field end-->

                        </div>
                    </div>



                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 text-center">
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                            <!-- each field start-->
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 margin-top-20">
                                <div class="col-md-2 col-lg-2 col-sm-2 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <p class="font-size-16">Administrator</p>
                                    </div>

                                </div>
                                <div class="col-md-4 col-lg-4 col-sm-4 col-xs-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <input class="form-control width-100 form_fields_edit" type="text" id="edit_chose_admin" name ="" >
                                        <!--                                      <select class="form-control woo-inputs-sm form_fields_edit" name="Purpose" id="edit_chose_admin">-->
                                        <!--                                          <option disabled selected>Select Admin</option>-->

                                        <!--                                      </select>-->
                                    </div>
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                        <input type="submit" name="" value="Submit Form" id="edit_button" class="logout_button pull-right">
                                    </div>

                                </div>
                            </div>
                            <!--each field end-->

                        </div>
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">

                        </div>


                        <!--edit mission form ends here -->



                        <!-- <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 padding-top-20">
                          <div class="col-md-1 col-lg-1 col-sm-1 col-xs-0"></div>
                          <div class="col-md-2 col-lg-2 col-sm-2 col-xs-4">
                            <label for="message">Message:</label>
                          </div>
                          <div class="col-md-8 col-lg-8 col-sm-8 col-xs-8 pad-0">
                            <textarea  class="form-control resize-none" name="Message" id="demo_message" placeholder="Write here"></textarea>
                          </div>
                        </div> -->
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 padding-top-20">
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 pad-0">

                            </div>
                        </div>
                        <!-- </div>  -->
                        <!-- form ends here -->
                    </div>
                </div>
                <div >
                    <!-- <button type="button" class="btn brand-btn contact-btn " data-dismiss="modal">Send Request</button> -->
                    <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> -->
                </div>
            </div>
        </div>
    </div>

        </div>




</body>
<script>
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const miss_id = urlParams.get('id');
    console.log(miss_id);
    var edit_bodyadmin= " ";

    var Url_edit = "http://localhost:8082/getMissionDetails/?id="+miss_id;
    var xhr_edit = new XMLHttpRequest();
    xhr_edit.open('GET', Url_edit, true);
    xhr_edit.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr_edit.send(JSON.stringify(edit_bodyadmin));
    xhr_edit.onload = processRequest_edit;
    function processRequest_edit(e) {

        if (xhr_edit.status == 200) {

            var Mission_datils = JSON.parse(xhr_edit.responseText);
            console.log(Mission_datils);

            var edit_mission_name = Mission_datils.name;
            console.log(edit_mission_name);
            var edit_mission_mission_desc = Mission_datils.description;

            var edit_mission_country_origin = Mission_datils.origin;
            var edit_mission_country_allowed = Mission_datils.countriesAllowed;
            var edit_mission_launch_date = Mission_datils.launchDate;
            //console.log(edit_mission_launch_date);
            //var edit_mission_destination= Mission_datils.name;

            var edit_mission_job= Mission_datils.jobs;
            var edit_mission_type= Mission_datils.type;
            var edit_mission_emp_req = Mission_datils.employmentRequirements;


            var edit_mission_cargo= Mission_datils.cargo;

            var edit_mission_status = Mission_datils.status;
            var edit_mission_admin = Mission_datils.administrators;
            var duration=Mission_datils.duration;


            console.log("Show Modal")
            document.getElementById("edit_mission_name").value = edit_mission_name;
            document.getElementById("edit_mission_desc").value = edit_mission_mission_desc;
            document.getElementById("edit_country_origin").value = edit_mission_country_origin;
           // document.getElementById("edit_country_allowed").value = edit_mission_country_allowed;
            document.getElementById("edit_launch_date").value = edit_mission_launch_date;
            document.getElementById("edit_chose_admin").value = edit_mission_admin;
            document.getElementById("edit_status").value = edit_mission_status;
            document.getElementById("edit_duration").value = duration;
            document.getElementById("edit_mission_type").value = edit_mission_type;
            var countryDiv = document.createElement('div');
            for (var i = 0; i < edit_mission_country_allowed.length; i++) {
                var country = document.createElement('input');
                country.setAttribute('class', 'col-md-12 col-lg-12 col-sm-12 col-xs-12 form_fields_edit');
                country.value=edit_mission_country_allowed[i];
                countryDiv.appendChild(country);
            }
            document.getElementById("countriesAllowed").appendChild(countryDiv);

            var employmentDiv = document.createElement('div');
            for (var i = 0; i < edit_mission_emp_req.length; i++) {
                var type = edit_mission_emp_req[i].employmentType;
                var number = edit_mission_emp_req[i].number;
                var employment = document.createElement('div');

                var employment_name = document.createElement('input');
                employment_name.setAttribute('class', 'col-md-12 col-lg-12 col-sm-12 col-xs-12 form_fields_edit');
                employment_name.value=type;

                var employment_num = document.createElement('input');
                employment_num.setAttribute('class', 'form-control width-100 form_fields_edit');
                employment_num.value=number;

                employment.appendChild(employment_name);
                employment.appendChild(employment_num);

                employmentDiv.appendChild(employment);
            }

            document.getElementById("edit_emp_div").appendChild(employmentDiv);

            var cargoDiv = document.createElement('div');
            for (var i = 0; i < edit_mission_cargo.length; i++) {
                var cargoType = edit_mission_cargo[i].cargoName;
                var quantityReq = edit_mission_cargo[i].cargoQuantity;
                var cargoReq= edit_mission_cargo[i].cargoType;

                var cargo = document.createElement('div');

                var cargo_type = document.createElement('input');
                cargo_type.setAttribute('class', 'form-control width-100 form_fields_edit');
                cargo_type.value=cargoType;

                var cargo_qualntity = document.createElement('input');
                cargo_qualntity.setAttribute('class', 'form-control width-100 form_fields_edit');
                cargo_qualntity.value=quantityReq;


                var cargo_for = document.createElement('input');
                cargo_for.setAttribute('class', 'form-control width-100 form_fields_edit');
                cargo_for.value=cargoReq;

                cargo.appendChild(cargo_type);
                cargo.appendChild(cargo_qualntity);
                cargo.appendChild(cargo_for);


                cargoDiv.appendChild(cargo);
            }

            document.getElementById("edit_cargo").appendChild(cargoDiv);

            var jobDiv = document.createElement('div');
            for (var i = 0; i < edit_mission_job.length; i++) {
                var type = edit_mission_job[i].employmentType;
                var number = edit_mission_job[i].number;
                var job = document.createElement('div');

                var employment_name = document.createElement('text');
                employment_name.setAttribute('class', 'form-control width-100 form_fields_edit');
                employment_name.innerText=type;

                var employment_num = document.createElement('text');
                employment_num.setAttribute('class', 'form-control width-100 form_fields_edit');
                employment_num.innerText=number;

                employment.appendChild(employment_name);
                employment.appendChild(employment_num);

                employmentDiv.appendChild(employment);
            }



        }

    }

    $(document).on('click', '#edit_button', function(){


        var Contain = "";
        $("#generate_modal :text").each(function(){
            Contain += $(this).val() + "$";
        });

        send_mission_name = $("#edit_mission_name").val();
        send_mission_desc  = $("#edit_mission_desc").val();
        send_mission_country_origin = $("#edit_country_origin").val();
        send_mission_country_allowed = $("#edit_country_allowed").val();
        send_mission_launch_date = $("#edit_launch_date").val();
        send_mission_destination = $("#edit_destination").val();
        send_mission_job_name = $("#edit_job_name").val();
        send_mission_job_desc = $("#edit_job_desc").val();
        send_mission_emp_title = $("#edit_emp_title").val();
        send_mission_emp_no = $("#edit_emp_no").val();
        send_mission_status = $("#edit_status").val();
        send_mission_admin = $("#edit_chose_admin").val();

        var bodysend={

            "_id":miss_id, //add mission id
            "name":send_mission_name,
            "description":send_mission_desc,
            "origin":send_mission_country_origin,
            "allowedCountries":send_mission_country_allowed,
            "launchDate":send_mission_launch_date,
            "status":send_mission_status,
            "duration":"23",
            "languageRequired":["english","hindi"],
            "cargo":
                [
                    {
                        "cargoName":"Rice",
                        "cargoQuantity":10
                    }
                ],
            "coordinatorId":4002,
            "key":miss_id

        };

        console.log(bodysend)
        var Urlsend = "http://localhost:8082/editMission";
        var xhrsend = new XMLHttpRequest();
        xhrsend.open('POST', Urlsend, true);
        xhrsend.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xhrsend.send(JSON.stringify(bodysend));
        xhrsend.onreadystatechange = processRequestcreate;

        function processRequestcreate(e) {
            if ( xhrsend.status == 200) {
                alert("Edit complete");
            }
            else{
                alert("Edit Not possible");
            }

        }
    });





</script>

</html>